---
// src\components\home\Certifications.astro
const { setStyle } = Astro.props;
import { certifications } from '@/data/js/certifications';
import Picture from 'astro/components/Picture.astro';
---

<section class="section w-full" style={`background: ${setStyle}`}>
  <div class="maxwidth mx-auto max-w-6xl text-center">
    <h2 class="mb-10 text-3xl font-bold">
      Certifications <span class="halfHeading">& Accreditations</span>
    </h2>
    <div class="flex flex-wrap justify-center gap-6">
      {
        certifications.map((cert, idx) => (
          <button
            class="openCertificateModalBtn cursor-pointer rounded-xl border p-4 hover:bg-gray-50"
            data-title={cert.name}
            data-link={cert.link.src}
          >
            <Picture src={cert.logo} alt={cert.name} class="h-20 w-20" format="png" />
          </button>
        ))
      }
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.openCertificateModalBtn').forEach((btn) => {
      btn.addEventListener('click', () => {
        const modal = document.getElementById('certificateModal');
        const certificateTitle = document.getElementById('certificateTitle');
        const certificateImage = document.getElementById('certificateImage');

        if (modal && certificateTitle && certificateImage) {
          certificateTitle.textContent = btn.dataset.title;
          certificateImage.src = btn.dataset.link;

          modal.classList.remove('hidden');
        }
      });
    });
  });
</script>
